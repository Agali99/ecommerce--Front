<!DOCTYPE html>
<html>
<head>
  <title>Registration</title>
  <link rel="stylesheet" type="text/css" href="styles/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="styles/login-style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</head>
<body>
  <!-- <section class="vh-100"> -->
    <div class="container-fluid h-custom">
      <div class="row d-flex justify-content-center align-items-center h-100">

        <div class="col-md-9 col-lg-6 col-xl-5">
          <img src="img/logo.png" class="img-fluid" alt="Logo">
        </div>

        <div class="col-md-8 col-lg-6 col-xl-4 offset-xl-1">
          <form action="">

            <div class="text-uppercase d-flex flex-row align-items-center justify-content-center justify-content-lg-start">
              <p class="lead fw-normal mb-0 mt-3">Registration</p>
            </div>

            <div class="divider d-flex my-4"></div>

            <div class="" id="message" style="color: red"></div>
			      <div class="form-outline mb-3">
              <input type="text" name="firstname" id="firstname" class="form-control form-control" placeholder="First Name" required/>
              <!-- <label class="form-label" for="firstname">First name</label> -->
            </div>

			      <div class="form-outline mb-3">
              <input type="text" name="lastname" id="lastname" class="form-control form-control" placeholder="Last Name" required/>
              <!-- <label class="form-label" for="lastname">Last name</label> -->
            </div>

            <div class="form-outline mb-3">
              <input type="text" name="username" id="username" class="form-control form-control" placeholder="Username" required/>
              <!-- <label class="form-label" for="username">Username</label> -->
            </div>

            <div class="form-outline mb-3">
              <input type="email" name="email" id="email" class="form-control form-control" placeholder="Email address" required/>
              <!-- <label class="form-label" for="email">Email address</label> -->
            </div>

            <div class="form-outline mb-3">
              <input type="password" id="password" class="form-control form-control" placeholder="Password" required/>
              <!-- <label class="form-label" for="password">Password</label> -->
            </div>

            <div class="form-outline mb-3">
              <input type="password" id="confirm_password" class="form-control form-control" placeholder="Confirm password" required/>
              <!-- <label class="form-label" for="confirm_password">Confirm Password</label> -->
            </div>

            <div class="d-flex justify-content-between align-items-center">
              <div class="form-check mb-0">
                <input class="form-check-input me-2" type="checkbox" value="" id="is_seller" onclick="show();"/>
                <label class="form-check-label" for="seller">I am a seller</label>
              </div>

            </div>

			      <!-- <div class="row border pt-3" id="sellerdetails"> -->
				      <div class="form-outline mb-3">
	              <input type="text" name="phonenumber" id="phonenumber" class="form-control form-control" placeholder="Phone Number"/>
	              <!-- <label class="form-label" for="phonenumber">Phone Number</label> -->
	            </div>

	            <div class="form-outline mb-3">
	              <input type="text" name="storename" id="storename" class="form-control form-control" placeholder="Name for your store"/>
	              <!-- <label class="form-label" for="storename">Store Name</label> -->
	            </div>

              <div class="form-outline mb-3">
	              <input type="text" name="postalcode" id="postalcode" class="form-control form-control" placeholder="Postal Code"/>
	              <!-- <label class="form-label" for="storename">Store Name</label> -->
	            </div>

				      <div class="form-outline mb-3">
	              <input type="text" id="address" class="form-control form-control" placeholder="Address" />
	              <!-- <label class="form-label" for="address">Address</label> -->
	            </div>
			      <!-- </div> -->

            <div class="form-outline mb-3">
              <input type="text" id="country" class="form-control form-control" placeholder="Country" />
              <!-- <label class="form-label" for="address">Country</label> -->
            </div>

            <div class="form-outline mb-3">
              <input type="text" id="city" class="form-control form-control" placeholder="City" />
              <!-- <label class="form-label" for="address">City</label> -->
            </div>

            <div class="text-center text-lg-start mt-2 pt-2">
              <button type="button" class="btn btn-primary btn-lg" style="padding-left: 2.5rem; padding-right: 2.5rem;" onclick="register()">
                Register
              </button>
              <a href="./login.html" class="text-body">Back to login</a>
            </div>
            <!-- <ul class="results" id="results">

            </ul> -->
          </form>
        </div>
      </div>
    </div>
    <div class="d-flex flex-md-row text-center text-md-start justify-content-between py-4 px-4 px-xl-5 bg-primary mt-5">
      <!-- Copyright -->
      <div class="text-white mb-3 mb-md-0">
        Copyright Â© 2022. All rights reserved.
      </div>
    </div>
  <!-- </section> -->

  <script type="text/javascript">
    function register(){
      clearBox("message")
      var url = 'http://localhost:8080/api/user/register';

      var firstName = document.getElementById("firstname").value;
      var lastName = document.getElementById("lastname").value;
      var username = document.getElementById("username").value;
      var email = document.getElementById("email").value;
      var password = document.getElementById("password").value;
      var confirmPassword = document.getElementById("confirm_password").value;
      var phoneNumber = document.getElementById("phonenumber").value;
      var storeName = document.getElementById("storename").value;
      var postalCode = document.getElementById("postalcode").value;
      var address = document.getElementById("address").value;
      var country = document.getElementById("country").value;
      var city = document.getElementById("city").value;

      var isSeller = false;
      if(document.getElementById("is_seller").checked)
        isSeller = true;
      else {
        isSeller = false;
      }
      console.log("Clicked!!!")

      if(firstName.length == "") {
        document.getElementById("message").innerHTML = "First name cannot be empty"
        return 0;
      }
      else if(lastName.length == "") {
        document.getElementById("message").innerHTML = "Last name cannot be empty"
        return 0;
      }
      else if(username.length == "") {
        document.getElementById("message").innerHTML = "Username cannot be empty"
        return 0;
      }
      else if(email.length == "") {
        document.getElementById("message").innerHTML = "Email cannot be empty"
        return 0;
      }
      else if(password.length == "") {
        document.getElementById("message").innerHTML = "Password cannot be empty"
        return 0;
      }
      else if(confirmPassword.length == "") {
        document.getElementById("message").innerHTML = "Confirm password field cannot be empty"
        return 0;
      }
      else if( password != confirmPassword){
        document.getElementById("message").innerHTML = "Passwords do not match"
        return 0;
      }
      else if(phoneNumber.length == "") {
        document.getElementById("message").innerHTML = "Phone number cannot be empty"
        return 0;
      }
      else if(storeName.length == "") {
        document.getElementById("message").innerHTML = "Store name cannot be empty"
        return 0;
      }
      else if(postalCode.length == "") {
        document.getElementById("message").innerHTML = "Postal code cannot be empty"
        return 0;
      }
      else if(address.length == "") {
        document.getElementById("message").innerHTML = "Address cannot be empty"
        return 0;
      }
      else if(country.length == "") {
        document.getElementById("message").innerHTML = "Country cannot be empty"
        return 0;
      }
      else if(city.length == "") {
        document.getElementById("message").innerHTML = "City cannot be empty"
        return 0;
      }

      console.log(isSeller);

      $.ajax({
        type: 'POST',
        url: url,
        data: JSON.stringify({
          'firstName':firstName,
          'lastName':lastName,
          'username':username,
          'email':email,
          'password':password,
          'phoneNumber':phoneNumber,
          'storeName':storeName,
          'postalCode':postalCode,
          'address':address,
          'country':country,
          'city':city,
          'customer': isSeller
        }),
        contentType : 'application/json; charset=utf-8',
        dataType:'json',
        success:function(data){
          $(location).prop('href', "./login.html")
        },
        error: function (XMLHttpRequest, textStatus, errorThrown){
          $('#message').append('Username or password is incorrect')
          console.log("Error")
        }
      });
    }

    function clearBox(elementID)
    {
        document.getElementById(elementID).innerHTML = "";
    }
  </script>

  <!-- <script type="text/javascript">

  	window.onload = function() {
  	  document.getElementById('sellerdetails').style.display = 'none';
  	};

  	function show(){
  		var x = document.getElementById("sellerdetails");
	  	if (x.style.display === "block") {
	    	x.style.display = "none";
	  	} else {
	    	x.style.display = "block";
	  	}
  	}

  </script> -->

</body>
</html>
