<!DOCTYPE html>
<html>
<head>
  <title>Registration</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" 
      rel="stylesheet" 
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" 
      crossorigin="anonymous">

  <link rel="stylesheet" type="text/css" href="styles/login-style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</head>
<body>
  <!-- <section class="vh-100"> -->
    <div class="container-fluid h-custom">
      <div class="row d-flex justify-content-center align-items-center h-100">

        <div class="col-md-9 col-lg-6 col-xl-5">
          <img src="img/logo.png" class="img-fluid" alt="Logo">
        </div>

        <div class="col-md-8 col-lg-6 col-xl-4 offset-xl-1">
          <form action="">

            <div class="text-uppercase d-flex flex-row align-items-center justify-content-center justify-content-lg-start">
              <p class="lead fw-normal mb-0 mt-3">Müştəri qeydiyyatı</p>
            </div>

            <div class="divider d-flex my-4"></div>

            <div class="" id="message" style="color: red"></div>
			      <div class="form-outline mb-3">
              <input type="text" name="firstname" id="firstname" class="form-control form-control" placeholder="Ad" required/>
              <!-- <label class="form-label" for="firstname">First name</label> -->
            </div>

			      <div class="form-outline mb-3">
              <input type="text" name="lastname" id="lastname" class="form-control form-control" placeholder="Soyad" required/>
              <!-- <label class="form-label" for="lastname">Last name</label> -->
            </div>

            <div class="form-outline mb-3">
              <input type="text" name="username" id="username" class="form-control form-control" placeholder="İstifadəçi adı" required/>
              <!-- <label class="form-label" for="username">Username</label> -->
            </div>

            <div class="form-outline mb-3">
              <input type="email" name="email" id="email" class="form-control form-control" placeholder="E-poçt ünvanı" required/>
              <!-- <label class="form-label" for="email">Email address</label> -->
            </div>

            <div class="form-outline mb-3">
              <input type="password" id="password" class="form-control form-control" placeholder="Parol" required/>
              <!-- <label class="form-label" for="password">Password</label> -->
            </div>

            <div class="form-outline mb-3">
              <input type="password" id="confirm_password" class="form-control form-control" placeholder="Parolu təsdiqlə" required/>
              <!-- <label class="form-label" for="confirm_password">Confirm Password</label> -->
            </div>

			      <!-- <div class="row border pt-3" id="sellerdetails"> -->
			      <div class="form-outline mb-3">
              <input type="text" name="phonenumber" id="phonenumber" class="form-control form-control" placeholder="Nömrə"/>
              <!-- <label class="form-label" for="phonenumber">Phone Number</label> -->
            </div>

            <div class="form-outline mb-3">
              <input type="text" id="country" class="form-control form-control" placeholder="Ölkə" />
              <!-- <label class="form-label" for="address">Country</label> -->
            </div>

            <div class="form-outline mb-3">
              <input type="text" id="city" class="form-control form-control" placeholder="Şəhər" />
              <!-- <label class="form-label" for="address">City</label> -->
            </div>

            <div class="text-center text-lg-start mt-2 pt-2">
              <button type="button" class="btn btn-primary btn-lg" style="padding-left: 2.5rem; padding-right: 2.5rem;" onclick="register()">
                Qeydiyyat
              </button>
              <a href="./login.html" class="text-body">Giriş səhifəsinə qayıt</a>
            </div>
            <!-- <ul class="results" id="results">

            </ul> -->
          </form>
        </div>
      </div>
    </div>
    <div class="d-flex flex-md-row text-center text-md-start justify-content-between py-4 px-4 px-xl-5 bg-primary mt-5">
      <!-- Copyright -->
      <div class="text-white mb-3 mb-md-0">
        Copyright © 2022. Bütün hüquqlar qorunur.
      </div>
    </div>
  <!-- </section> -->
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" 
            crossorigin="anonymous"></script>
  <script type="text/javascript" src="./js/constants.js"></script> 

  <script type="text/javascript">
    function register(){
      clearBox("message")
      var url = ipAddress.ip+'/api/user/register/customer';

      var firstName = document.getElementById("firstname").value;
      var lastName = document.getElementById("lastname").value;
      var username = document.getElementById("username").value;
      var email = document.getElementById("email").value;
      var password = document.getElementById("password").value;
      var confirmPassword = document.getElementById("confirm_password").value;
      var phoneNumber = document.getElementById("phonenumber").value;
      var country = document.getElementById("country").value;
      var city = document.getElementById("city").value;

      console.log("Clicked!!!")

      if(firstName.length == "") {
        document.getElementById("message").innerHTML = "Ad  xanası boş qala bilməz"
        return 0;
      }
      else if(lastName.length == "") {
        document.getElementById("message").innerHTML = "Soyad  xanası boş qala bilməz"
        return 0;
      }
      else if(username.length == "") {
        document.getElementById("message").innerHTML = "İstifadəçi adı  xanası boş qala bilməz"
        return 0;
      }
      else if(email.length == "") {
        document.getElementById("message").innerHTML = "E-poçt xanası boş qala bilməz"
        return 0;
      }
      else if(password.length == "") {
        document.getElementById("message").innerHTML = "Parol xanası boş qala bilməz"
        return 0;
      }
      else if(confirmPassword.length == "") {
        document.getElementById("message").innerHTML = "Parolu təsdiqlə xanası boş qala bilməz"
        return 0;
      }
      else if( password != confirmPassword){
        document.getElementById("message").innerHTML = "Parollar eyni olmalıdır"
        return 0;
      }
      else if(phoneNumber.length == "") {
        document.getElementById("message").innerHTML = "Nömrə xanası boş qala bilməz"
        return 0;
      }
      else if(country.length == "") {
        document.getElementById("message").innerHTML = "Ölkə xanası boş qala bilməz"
        return 0;
      }
      else if(city.length == "") {
        document.getElementById("message").innerHTML = "Şəhər xanası boş qala bilməz"
        return 0;
      }

      $.ajax({
        type: 'POST',
        url: url,
        data: JSON.stringify({
          'firstName':firstName,
          'lastName':lastName,
          'username':username,
          'email':email,
          'password':password,
          'phoneNumber':phoneNumber,
          'country':country,
          'city':city
        }),
        contentType : 'application/json; charset=utf-8',
        dataType:'json',
        success:function(data){
          $(location).prop('href', "./register_success.html")
        },
        error: function (XMLHttpRequest, textStatus, errorThrown){
          $('#message').append('Username or password is incorrect')
          console.log("Error")
        }
      });
    }

    function clearBox(elementID)
    {
        document.getElementById(elementID).innerHTML = "";
    }
  </script>


</body>
</html>
